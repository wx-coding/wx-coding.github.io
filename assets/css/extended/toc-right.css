/* 右侧固定目录样式 */
@media screen and (min-width: 1200px) {
  .post-single {
    max-width: 900px;
    margin: 0 auto;
    position: relative;
  }

  .toc {
    position: fixed;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    width: 280px;
    max-height: 70vh;
    overflow-y: auto;
    background: var(--entry);
    border: 1px solid var(--border);
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 100;
    transition: opacity 0.3s ease;
  }

  .toc details {
    margin: 0;
  }

  .toc summary {
    padding: 12px 16px;
    font-weight: 600;
    color: var(--primary);
    cursor: pointer;
    border-bottom: 1px solid var(--border);
    background: var(--code-bg);
  }

  .toc summary:hover {
    background: var(--hljs-bg);
  }

  .toc .inner {
    padding: 2px 1px;
    font-size: 0.9em;
  }

  .toc ul {
    margin: 0;
    padding-left: 0;
    list-style: none;
  }

  /* 优化缩进：极简层级缩进 */
  .toc ul ul {
    padding-left: 2px;
    margin-top: 2px;
  }

  /* 限制最大缩进层级，避免过深的嵌套 */
  .toc ul ul ul {
    padding-left: 2px;
  }

  .toc ul ul ul ul {
    padding-left: 2px;
  }

  /* 超过4层嵌套不再增加缩进 */
  .toc ul ul ul ul ul,
  .toc ul ul ul ul ul ul {
    padding-left: 2px;
  }

  .toc li {
    margin: 2px 0;
  }

  .toc a {
    color: var(--secondary);
    text-decoration: none;
    line-height: 1.4;
    display: block;
    padding: 6px 8px;
    border-radius: 4px;
    transition: all 0.2s ease;
    font-size: 0.9em;
    border-left: 2px solid transparent;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 100%;
  }

  /* 不同层级的视觉差异 */
  .toc > ul > li > a {
    font-weight: 600;
    font-size: 0.95em;
    color: var(--primary);
    border-left-color: var(--theme);
  }

  .toc ul ul > li > a {
    font-size: 0.88em;
    opacity: 0.9;
  }

  .toc ul ul ul > li > a {
    font-size: 0.85em;
    opacity: 0.8;
    font-style: italic;
  }

  .toc ul ul ul ul > li > a,
  .toc ul ul ul ul ul > li > a {
    font-size: 0.82em;
    opacity: 0.75;
  }

  .toc a:hover {
    color: var(--primary);
    border-left-color: var(--theme);
  }

  /* 活动状态样式 */
  .toc a:target,
  .toc a.active {
    background: var(--theme);
    color: var(--entry);
    border-left-color: var(--primary);
  }

  /* 滚动条美化 */
  .toc::-webkit-scrollbar {
    width: 6px;
  }

  .toc::-webkit-scrollbar-track {
    background: var(--code-bg);
    border-radius: 3px;
  }

  .toc::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 3px;
  }

  .toc::-webkit-scrollbar-thumb:hover {
    background: var(--secondary);
  }

  /* 当屏幕宽度不足时隐藏右侧目录，避免遮挡文章内容 */
  @media screen and (max-width: 1400px) {
    .toc {
      right: 10px;
      width: 260px;
    }
  }
}

/* 平板和手机设备：目录保持原位置 */
@media screen and (max-width: 1199px) {
  .toc {
    position: relative;
    width: 100%;
    margin-bottom: 2rem;
    background: var(--code-bg);
    border: 1px solid var(--border);
    border-radius: 8px;
  }

  .toc summary {
    padding: 12px 16px;
    background: var(--entry);
  }

  .toc .inner {
    padding: 16px 8px;
  }
}

/* 暗色模式适配 */
[data-theme="dark"] .toc {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}